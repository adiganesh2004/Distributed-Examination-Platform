#!/bin/bash

MAIN_DB_PORT=$1

cockroach sql --insecure --port=${MAIN_DB_PORT} <<EOF

CREATE DATABASE IF NOT EXISTS distributed_exam;
USE distributed_exam;

CREATE TABLE IF NOT EXISTS CANDIDATE (
    CANDIDATE_NAME VARCHAR(100) NOT NULL,
    CANDIDATE_EMAIL VARCHAR(100) UNIQUE NOT NULL,
    CANDIDATE_PASSWORD VARCHAR(100) NOT NULL,
    CANDIDATE_ID INT GENERATED BY DEFAULT AS IDENTITY,
    COLLEGE VARCHAR(100),
    SKILLS VARCHAR(255)

);

CREATE TABLE IF NOT EXISTS ADMIN (
    ADMIN_NAME VARCHAR(100) NOT NULL,
    ADMIN_EMAIL VARCHAR(100) UNIQUE NOT NULL,
    ADMIN_PASSWORD VARCHAR(100) NOT NULL,
    ADMIN_ID INT GENERATED BY DEFAULT AS IDENTITY
);

EOF
